2025-07-27 10:47:38,682 [INFO] spectra_004_db: DB ready at test.db
2025-07-27 10:47:38,707 [INFO] spectra_004_db: DB ready at test.db
2025-07-27 10:47:38,730 [INFO] spectra_004_db: DB ready at test.db
2025-07-27 10:47:38,757 [INFO] spectra_004_db: DB ready at test.db
2025-07-27 10:47:38,779 [INFO] spectra_004_db: DB ready at test.db
2025-07-27 10:47:38,804 [INFO] spectra_004_db: DB ready at test.db
2025-07-27 10:47:38,828 [INFO] spectra_004_db: DB ready at test.db
2025-07-27 10:47:38,831 [ERROR] tgarchive.file_sorter: Error updating category stats for test.pdf: [Errno 2] No such file or directory: 'test.pdf'
2025-07-27 10:47:38,834 [ERROR] tgarchive.file_sorter: Error updating category stats for test.jpg: [Errno 2] No such file or directory: 'test.jpg'
2025-07-27 10:47:38,834 [ERROR] tgarchive.file_sorter: Error getting MIME type for test.unknown: test error
2025-07-27 10:47:38,834 [ERROR] tgarchive.file_sorter: Error updating category stats for test.unknown: [Errno 2] No such file or directory: 'test.unknown'
2025-07-27 10:47:38,857 [INFO] spectra_004_db: DB ready at test.db
2025-07-27 10:47:38,872 [INFO] tgarchive.config_models: Configuration saved to <MagicMock spec='Path' id='140501076664656'>
2025-07-27 10:47:38,877 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-07-27 10:47:38,878 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-07-27 10:47:38,879 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication table 'forwarded_messages' initialized successfully.
2025-07-27 10:47:38,879 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing message hashes into memory for deduplication.
2025-07-27 10:47:38,885 [INFO] tgarchive.config_models: Configuration saved to <MagicMock spec='Path' id='140501094935072'>
2025-07-27 10:47:38,886 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-07-27 10:47:38,887 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-07-27 10:47:38,888 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication table 'forwarded_messages' initialized successfully.
2025-07-27 10:47:38,888 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing message hashes into memory for deduplication.
2025-07-27 10:47:38,893 [INFO] tgarchive.config_models: Configuration saved to <MagicMock spec='Path' id='140501066616944'>
2025-07-27 10:47:38,894 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-07-27 10:47:38,895 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-07-27 10:47:38,896 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication table 'forwarded_messages' initialized successfully.
2025-07-27 10:47:38,896 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing message hashes into memory for deduplication.
2025-07-27 10:47:38,896 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: filename
2025-07-27 10:47:38,896 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-07-27 10:47:38,898 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication table 'forwarded_messages' initialized successfully.
2025-07-27 10:47:38,898 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing message hashes into memory for deduplication.
2025-07-27 10:47:38,903 [INFO] tgarchive.config_models: Configuration saved to <MagicMock spec='Path' id='140501066847136'>
2025-07-27 10:47:38,905 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-07-27 10:47:38,905 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-07-27 10:47:38,906 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication table 'forwarded_messages' initialized successfully.
2025-07-27 10:47:38,906 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing message hashes into memory for deduplication.
2025-07-27 10:47:38,907 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: time
2025-07-27 10:47:38,907 [INFO] tgarchive.forwarding.AttachmentForwarder: Grouping time window: 60 seconds
2025-07-27 10:47:38,907 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-07-27 10:47:38,908 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication table 'forwarded_messages' initialized successfully.
2025-07-27 10:47:38,908 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing message hashes into memory for deduplication.
2025-07-27 10:47:38,913 [INFO] tgarchive.config_models: Configuration saved to <MagicMock spec='Path' id='140501067163376'>
2025-07-27 10:47:38,914 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-07-27 10:47:38,915 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-07-27 10:47:38,916 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication table 'forwarded_messages' initialized successfully.
2025-07-27 10:47:38,916 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing message hashes into memory for deduplication.
2025-07-27 10:47:38,920 [INFO] tgarchive.config_models: Loaded config from spectra_config.json
2025-07-27 10:47:38,947 [INFO] spectra_004_db: DB ready at test.db
2025-07-27 10:47:38,948 [INFO] tgarchive.forwarding.SortingForwarder: File grouping strategy: none
2025-07-27 10:47:38,948 [INFO] tgarchive.forwarding.SortingForwarder: Deduplication is ENABLED.
2025-07-27 10:47:38,949 [INFO] tgarchive.forwarding.SortingForwarder: Deduplication table 'forwarded_messages' initialized successfully.
2025-07-27 10:47:38,949 [INFO] tgarchive.forwarding.SortingForwarder: Loaded 0 existing message hashes into memory for deduplication.
2025-07-27 10:47:38,954 [ERROR] tgarchive.file_sorter: Error getting MIME type for /tmp/tmpsppvm6xt/MagicMock/doc1.pdf.name/140501066892832: [Errno 2] No such file or directory: '/tmp/tmpsppvm6xt/MagicMock/doc1.pdf.name/140501066892832'
2025-07-27 10:47:38,954 [ERROR] tgarchive.file_sorter: Error updating category stats for /tmp/tmpsppvm6xt/MagicMock/doc1.pdf.name/140501066892832: [Errno 2] No such file or directory: '/tmp/tmpsppvm6xt/MagicMock/doc1.pdf.name/140501066892832'
2025-07-27 10:47:38,957 [ERROR] tgarchive.file_sorter: Error getting MIME type for /tmp/tmpsppvm6xt/MagicMock/archive1.zip.name/140501110133616: [Errno 2] No such file or directory: '/tmp/tmpsppvm6xt/MagicMock/archive1.zip.name/140501110133616'
2025-07-27 10:47:38,957 [ERROR] tgarchive.file_sorter: Error updating category stats for /tmp/tmpsppvm6xt/MagicMock/archive1.zip.name/140501110133616: [Errno 2] No such file or directory: '/tmp/tmpsppvm6xt/MagicMock/archive1.zip.name/140501110133616'
2025-07-27 10:47:38,960 [ERROR] tgarchive.file_sorter: Error getting MIME type for /tmp/tmpsppvm6xt/MagicMock/readme.txt.name/140501066808208: [Errno 2] No such file or directory: '/tmp/tmpsppvm6xt/MagicMock/readme.txt.name/140501066808208'
2025-07-27 10:47:38,960 [ERROR] tgarchive.file_sorter: Error updating category stats for /tmp/tmpsppvm6xt/MagicMock/readme.txt.name/140501066808208: [Errno 2] No such file or directory: '/tmp/tmpsppvm6xt/MagicMock/readme.txt.name/140501066808208'
2025-07-27 10:47:38,964 [INFO] tgarchive.config_models: Loaded config from spectra_config.json
2025-07-27 10:47:38,986 [INFO] spectra_004_db: DB ready at test.db
2025-07-27 10:47:38,987 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-07-27 10:47:38,987 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-07-27 10:47:38,988 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication table 'forwarded_messages' initialized successfully.
2025-07-27 10:47:38,988 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing message hashes into memory for deduplication.
2025-07-27 10:47:38,991 [INFO] tgarchive.config_models: Loaded config from spectra_config.json
2025-07-27 10:47:39,013 [INFO] spectra_004_db: DB ready at test.db
2025-07-27 10:47:39,013 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-07-27 10:47:39,014 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-07-27 10:47:39,015 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication table 'forwarded_messages' initialized successfully.
2025-07-27 10:47:39,015 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing message hashes into memory for deduplication.
2025-07-27 10:47:39,019 [INFO] tgarchive.forwarding.SortingForwarder: File grouping strategy: none
2025-07-27 10:47:39,020 [INFO] tgarchive.forwarding.SortingForwarder: Deduplication is ENABLED.
2025-07-27 10:47:39,020 [INFO] tgarchive.forwarding.SortingForwarder: Deduplication table 'forwarded_messages' initialized successfully.
2025-07-27 10:47:39,020 [ERROR] tgarchive.forwarding.SortingForwarder: Failed to load existing message hashes from database: 'Mock' object is not iterable
Traceback (most recent call last):
  File "/app/tgarchive/forwarding.py", line 156, in _load_existing_hashes
    for row in cursor:
               ^^^^^^
TypeError: 'Mock' object is not iterable
2025-07-27 10:47:39,038 [ERROR] tgarchive.sorting_forwarder: Error sorting files from test_source: 'async for' requires an object with __aiter__ method, got coroutine
2025-07-27 10:47:39,042 [INFO] tgarchive.forwarding.SortingForwarder: File grouping strategy: none
2025-07-27 10:47:39,043 [INFO] tgarchive.forwarding.SortingForwarder: Deduplication is ENABLED.
2025-07-27 10:47:39,043 [INFO] tgarchive.forwarding.SortingForwarder: Deduplication table 'forwarded_messages' initialized successfully.
2025-07-27 10:47:39,043 [ERROR] tgarchive.forwarding.SortingForwarder: Failed to load existing message hashes from database: 'Mock' object is not iterable
Traceback (most recent call last):
  File "/app/tgarchive/forwarding.py", line 156, in _load_existing_hashes
    for row in cursor:
               ^^^^^^
TypeError: 'Mock' object is not iterable
2025-07-27 10:47:39,046 [ERROR] tgarchive.sorting_forwarder: Error sorting files from test_source: 'async for' requires an object with __aiter__ method, got coroutine
2025-07-27 10:47:39,069 [INFO] spectra_004_db: DB ready at test.db
