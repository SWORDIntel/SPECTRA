2025-08-03 07:32:53,633 [INFO] tgarchive.config_models: Loaded config from <MagicMock id='139979080130896'>
2025-08-03 07:32:53,634 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-08-03 07:32:53,636 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-08-03 07:32:53,638 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-08-03 07:32:53,655 [INFO] tgarchive.forwarding.AttachmentForwarder: Near-duplicate file found for Msg ID 4 (fuzzy hash similarity: 91% >= 90%, matches file_id: 3).
2025-08-03 07:32:53,657 [INFO] tgarchive.config_models: Loaded config from <MagicMock id='139979080248176'>
2025-08-03 07:32:53,658 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-08-03 07:32:53,658 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-08-03 07:32:53,659 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-08-03 07:32:54,242 [INFO] tgarchive.forwarding.AttachmentForwarder: Near-duplicate image found for Msg ID 2 (pHash distance: 4 <= 5, matches file_id: 1).
2025-08-03 07:32:54,282 [INFO] spectra_004_db: DB ready at test.db
2025-08-03 07:32:54,325 [INFO] spectra_004_db: DB ready at test.db
2025-08-03 07:32:54,358 [INFO] spectra_004_db: DB ready at test.db
2025-08-03 07:32:54,402 [INFO] spectra_004_db: DB ready at test.db
2025-08-03 07:32:54,786 [INFO] spectra_004_db: DB ready at test.db
2025-08-03 07:32:54,824 [INFO] spectra_004_db: DB ready at test.db
2025-08-03 07:32:54,862 [INFO] spectra_004_db: DB ready at test.db
2025-08-03 07:32:54,866 [ERROR] tgarchive.file_sorter: Error updating category stats for test.pdf: [Errno 2] No such file or directory: 'test.pdf'
2025-08-03 07:32:54,868 [ERROR] tgarchive.file_sorter: Error updating category stats for test.jpg: [Errno 2] No such file or directory: 'test.jpg'
2025-08-03 07:32:54,868 [ERROR] tgarchive.file_sorter: Error getting MIME type for test.unknown: test error
2025-08-03 07:32:54,868 [ERROR] tgarchive.file_sorter: Error updating category stats for test.unknown: [Errno 2] No such file or directory: 'test.unknown'
2025-08-03 07:32:54,907 [INFO] spectra_004_db: DB ready at test.db
2025-08-03 07:32:54,972 [INFO] tgarchive.config_models: Configuration saved to <MagicMock spec='Path' id='139979080758720'>
2025-08-03 07:32:54,978 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-08-03 07:32:54,978 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-08-03 07:32:54,979 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-08-03 07:32:54,980 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: filename
2025-08-03 07:32:54,980 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-08-03 07:32:54,981 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-08-03 07:32:54,988 [INFO] tgarchive.config_models: Configuration saved to <MagicMock spec='Path' id='139978628177776'>
2025-08-03 07:32:54,989 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-08-03 07:32:54,989 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-08-03 07:32:54,991 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-08-03 07:32:54,991 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: time
2025-08-03 07:32:54,991 [INFO] tgarchive.forwarding.AttachmentForwarder: Grouping time window: 60 seconds
2025-08-03 07:32:54,991 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-08-03 07:32:54,993 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-08-03 07:32:55,047 [INFO] tgarchive.config_models: Configuration saved to <MagicMock spec='Path' id='139978628432528'>
2025-08-03 07:32:55,048 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-08-03 07:32:55,049 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-08-03 07:32:55,050 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-08-03 07:32:55,053 [INFO] tgarchive.config_models: Loaded config from spectra_config.json
2025-08-03 07:32:55,089 [INFO] spectra_004_db: DB ready at test.db
2025-08-03 07:32:55,090 [INFO] tgarchive.forwarding.SortingForwarder: File grouping strategy: none
2025-08-03 07:32:55,090 [INFO] tgarchive.forwarding.SortingForwarder: Deduplication is ENABLED.
2025-08-03 07:32:55,090 [INFO] tgarchive.forwarding.SortingForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-08-03 07:32:55,095 [ERROR] tgarchive.file_sorter: Error getting MIME type for /tmp/tmpu8a0dyvr/MagicMock/doc1.pdf.name/139978628526688: [Errno 2] No such file or directory: '/tmp/tmpu8a0dyvr/MagicMock/doc1.pdf.name/139978628526688'
2025-08-03 07:32:55,095 [ERROR] tgarchive.file_sorter: Error updating category stats for /tmp/tmpu8a0dyvr/MagicMock/doc1.pdf.name/139978628526688: [Errno 2] No such file or directory: '/tmp/tmpu8a0dyvr/MagicMock/doc1.pdf.name/139978628526688'
2025-08-03 07:32:55,098 [ERROR] tgarchive.file_sorter: Error getting MIME type for /tmp/tmpu8a0dyvr/MagicMock/archive1.zip.name/139978628464720: [Errno 2] No such file or directory: '/tmp/tmpu8a0dyvr/MagicMock/archive1.zip.name/139978628464720'
2025-08-03 07:32:55,099 [ERROR] tgarchive.file_sorter: Error updating category stats for /tmp/tmpu8a0dyvr/MagicMock/archive1.zip.name/139978628464720: [Errno 2] No such file or directory: '/tmp/tmpu8a0dyvr/MagicMock/archive1.zip.name/139978628464720'
2025-08-03 07:32:55,102 [ERROR] tgarchive.file_sorter: Error getting MIME type for /tmp/tmpu8a0dyvr/MagicMock/readme.txt.name/139979079747008: [Errno 2] No such file or directory: '/tmp/tmpu8a0dyvr/MagicMock/readme.txt.name/139979079747008'
2025-08-03 07:32:55,102 [ERROR] tgarchive.file_sorter: Error updating category stats for /tmp/tmpu8a0dyvr/MagicMock/readme.txt.name/139979079747008: [Errno 2] No such file or directory: '/tmp/tmpu8a0dyvr/MagicMock/readme.txt.name/139979079747008'
2025-08-03 07:32:55,106 [INFO] tgarchive.config_models: Loaded config from spectra_config.json
2025-08-03 07:32:55,146 [INFO] spectra_004_db: DB ready at test.db
2025-08-03 07:32:55,147 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-08-03 07:32:55,147 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-08-03 07:32:55,147 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-08-03 07:32:55,151 [INFO] tgarchive.config_models: Loaded config from spectra_config.json
2025-08-03 07:32:55,192 [INFO] spectra_004_db: DB ready at test.db
2025-08-03 07:32:55,193 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-08-03 07:32:55,193 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-08-03 07:32:55,193 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-08-03 07:32:55,195 [INFO] tgarchive.config_models: Loaded config from <MagicMock id='139978628473504'>
2025-08-03 07:32:55,195 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-08-03 07:32:55,195 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-08-03 07:32:55,196 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-08-03 07:32:55,201 [INFO] tgarchive.forwarding.AttachmentForwarder: Recorded forwarded file (Msg ID 1, SHA256: 54eb06f8ca...) to database.
2025-08-03 07:32:55,202 [INFO] tgarchive.forwarding.AttachmentForwarder: Duplicate file found (Msg ID 1, SHA256: 54eb06f8ca...) via in-memory cache.
2025-08-03 07:32:55,203 [INFO] tgarchive.forwarding.AttachmentForwarder: Duplicate file found (Msg ID 1, SHA256: 54eb06f8ca...) via database.
2025-08-03 07:32:55,208 [INFO] tgarchive.forwarding.SortingForwarder: File grouping strategy: none
2025-08-03 07:32:55,208 [INFO] tgarchive.forwarding.SortingForwarder: Deduplication is ENABLED.
2025-08-03 07:32:55,208 [ERROR] tgarchive.forwarding.SortingForwarder: Error loading existing file hashes: 'Mock' object is not iterable
Traceback (most recent call last):
  File "/app/tgarchive/forwarding.py", line 142, in _load_existing_hashes
    for row in cursor:
               ^^^^^^
TypeError: 'Mock' object is not iterable
2025-08-03 07:32:55,212 [INFO] tgarchive.forwarding.SortingForwarder: File grouping strategy: none
2025-08-03 07:32:55,212 [INFO] tgarchive.forwarding.SortingForwarder: Deduplication is ENABLED.
2025-08-03 07:32:55,212 [ERROR] tgarchive.forwarding.SortingForwarder: Error loading existing file hashes: 'Mock' object is not iterable
Traceback (most recent call last):
  File "/app/tgarchive/forwarding.py", line 142, in _load_existing_hashes
    for row in cursor:
               ^^^^^^
TypeError: 'Mock' object is not iterable
2025-08-03 07:32:55,252 [INFO] spectra_004_db: DB ready at test.db
