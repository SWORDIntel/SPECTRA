2025-08-01 08:31:44,339 [INFO] spectra_004_db: DB ready at test.db
2025-08-01 08:31:44,381 [INFO] spectra_004_db: DB ready at test.db
2025-08-01 08:31:44,414 [INFO] spectra_004_db: DB ready at test.db
2025-08-01 08:31:44,454 [INFO] spectra_004_db: DB ready at test.db
2025-08-01 08:31:45,401 [INFO] spectra_004_db: DB ready at test.db
2025-08-01 08:31:45,446 [INFO] spectra_004_db: DB ready at test.db
2025-08-01 08:31:45,490 [INFO] spectra_004_db: DB ready at test.db
2025-08-01 08:31:45,494 [ERROR] tgarchive.file_sorter: Error updating category stats for test.pdf: [Errno 2] No such file or directory: 'test.pdf'
2025-08-01 08:31:45,495 [ERROR] tgarchive.file_sorter: Error updating category stats for test.jpg: [Errno 2] No such file or directory: 'test.jpg'
2025-08-01 08:31:45,496 [ERROR] tgarchive.file_sorter: Error getting MIME type for test.unknown: test error
2025-08-01 08:31:45,496 [ERROR] tgarchive.file_sorter: Error updating category stats for test.unknown: [Errno 2] No such file or directory: 'test.unknown'
2025-08-01 08:31:45,533 [INFO] spectra_004_db: DB ready at test.db
2025-08-01 08:31:45,597 [INFO] tgarchive.config_models: Configuration saved to <MagicMock spec='Path' id='140146600799568'>
2025-08-01 08:31:45,603 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-08-01 08:31:45,605 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-08-01 08:31:45,607 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-08-01 08:31:45,607 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: filename
2025-08-01 08:31:45,607 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-08-01 08:31:45,609 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-08-01 08:31:45,618 [INFO] tgarchive.config_models: Configuration saved to <MagicMock spec='Path' id='140147026905136'>
2025-08-01 08:31:45,619 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-08-01 08:31:45,619 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-08-01 08:31:45,620 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-08-01 08:31:45,620 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: time
2025-08-01 08:31:45,620 [INFO] tgarchive.forwarding.AttachmentForwarder: Grouping time window: 60 seconds
2025-08-01 08:31:45,620 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-08-01 08:31:45,621 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-08-01 08:31:45,625 [INFO] tgarchive.config_models: Configuration saved to <MagicMock spec='Path' id='140146477320912'>
2025-08-01 08:31:45,626 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-08-01 08:31:45,626 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-08-01 08:31:45,627 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-08-01 08:31:45,632 [INFO] tgarchive.config_models: Loaded config from spectra_config.json
2025-08-01 08:31:45,668 [INFO] spectra_004_db: DB ready at test.db
2025-08-01 08:31:45,669 [INFO] tgarchive.forwarding.SortingForwarder: File grouping strategy: none
2025-08-01 08:31:45,669 [INFO] tgarchive.forwarding.SortingForwarder: Deduplication is ENABLED.
2025-08-01 08:31:45,669 [INFO] tgarchive.forwarding.SortingForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-08-01 08:31:45,674 [ERROR] tgarchive.file_sorter: Error getting MIME type for /tmp/tmp_rctr5kv/MagicMock/doc1.pdf.name/140146477383264: [Errno 2] No such file or directory: '/tmp/tmp_rctr5kv/MagicMock/doc1.pdf.name/140146477383264'
2025-08-01 08:31:45,675 [ERROR] tgarchive.file_sorter: Error updating category stats for /tmp/tmp_rctr5kv/MagicMock/doc1.pdf.name/140146477383264: [Errno 2] No such file or directory: '/tmp/tmp_rctr5kv/MagicMock/doc1.pdf.name/140146477383264'
2025-08-01 08:31:45,679 [ERROR] tgarchive.file_sorter: Error getting MIME type for /tmp/tmp_rctr5kv/MagicMock/archive1.zip.name/140146479666464: [Errno 2] No such file or directory: '/tmp/tmp_rctr5kv/MagicMock/archive1.zip.name/140146479666464'
2025-08-01 08:31:45,679 [ERROR] tgarchive.file_sorter: Error updating category stats for /tmp/tmp_rctr5kv/MagicMock/archive1.zip.name/140146479666464: [Errno 2] No such file or directory: '/tmp/tmp_rctr5kv/MagicMock/archive1.zip.name/140146479666464'
2025-08-01 08:31:45,683 [ERROR] tgarchive.file_sorter: Error getting MIME type for /tmp/tmp_rctr5kv/MagicMock/readme.txt.name/140146477374240: [Errno 2] No such file or directory: '/tmp/tmp_rctr5kv/MagicMock/readme.txt.name/140146477374240'
2025-08-01 08:31:45,683 [ERROR] tgarchive.file_sorter: Error updating category stats for /tmp/tmp_rctr5kv/MagicMock/readme.txt.name/140146477374240: [Errno 2] No such file or directory: '/tmp/tmp_rctr5kv/MagicMock/readme.txt.name/140146477374240'
2025-08-01 08:31:45,688 [INFO] tgarchive.config_models: Loaded config from spectra_config.json
2025-08-01 08:31:45,732 [INFO] spectra_004_db: DB ready at test.db
2025-08-01 08:31:45,732 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-08-01 08:31:45,733 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-08-01 08:31:45,733 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-08-01 08:31:45,738 [INFO] tgarchive.config_models: Loaded config from spectra_config.json
2025-08-01 08:31:45,780 [INFO] spectra_004_db: DB ready at test.db
2025-08-01 08:31:45,780 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-08-01 08:31:45,781 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-08-01 08:31:45,781 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-08-01 08:31:45,783 [INFO] tgarchive.config_models: Loaded config from <MagicMock id='140146476638496'>
2025-08-01 08:31:45,783 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-08-01 08:31:45,783 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-08-01 08:31:45,785 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-08-01 08:31:45,794 [INFO] tgarchive.forwarding.AttachmentForwarder: Recorded forwarded file (Msg ID 1, SHA256: 54eb06f8ca...) to database.
2025-08-01 08:31:45,795 [INFO] tgarchive.forwarding.AttachmentForwarder: Duplicate file found (Msg ID 1, SHA256: 54eb06f8ca...) via in-memory cache.
2025-08-01 08:31:45,798 [INFO] tgarchive.forwarding.AttachmentForwarder: Duplicate file found (Msg ID 1, SHA256: 54eb06f8ca...) via database.
2025-08-01 08:31:45,804 [INFO] tgarchive.forwarding.SortingForwarder: File grouping strategy: none
2025-08-01 08:31:45,804 [INFO] tgarchive.forwarding.SortingForwarder: Deduplication is ENABLED.
2025-08-01 08:31:45,804 [ERROR] tgarchive.forwarding.SortingForwarder: Error loading existing file hashes: 'Mock' object is not iterable
Traceback (most recent call last):
  File "/app/tgarchive/forwarding.py", line 141, in _load_existing_hashes
    for row in cursor:
               ^^^^^^
TypeError: 'Mock' object is not iterable
2025-08-01 08:31:45,810 [INFO] tgarchive.forwarding.SortingForwarder: File grouping strategy: none
2025-08-01 08:31:45,810 [INFO] tgarchive.forwarding.SortingForwarder: Deduplication is ENABLED.
2025-08-01 08:31:45,810 [ERROR] tgarchive.forwarding.SortingForwarder: Error loading existing file hashes: 'Mock' object is not iterable
Traceback (most recent call last):
  File "/app/tgarchive/forwarding.py", line 141, in _load_existing_hashes
    for row in cursor:
               ^^^^^^
TypeError: 'Mock' object is not iterable
2025-08-01 08:31:45,849 [INFO] spectra_004_db: DB ready at test.db
