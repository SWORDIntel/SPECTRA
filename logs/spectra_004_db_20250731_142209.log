2025-07-31 14:22:09,958 [INFO] spectra_004_db: DB ready at test.db
2025-07-31 14:22:10,004 [INFO] spectra_004_db: DB ready at test.db
2025-07-31 14:22:10,053 [INFO] spectra_004_db: DB ready at test.db
2025-07-31 14:22:10,095 [INFO] spectra_004_db: DB ready at test.db
2025-07-31 14:22:10,567 [INFO] spectra_004_db: DB ready at test.db
2025-07-31 14:22:10,613 [INFO] spectra_004_db: DB ready at test.db
2025-07-31 14:22:10,658 [INFO] spectra_004_db: DB ready at test.db
2025-07-31 14:22:10,663 [ERROR] tgarchive.file_sorter: Error updating category stats for test.pdf: [Errno 2] No such file or directory: 'test.pdf'
2025-07-31 14:22:10,664 [ERROR] tgarchive.file_sorter: Error updating category stats for test.jpg: [Errno 2] No such file or directory: 'test.jpg'
2025-07-31 14:22:10,664 [ERROR] tgarchive.file_sorter: Error getting MIME type for test.unknown: test error
2025-07-31 14:22:10,664 [ERROR] tgarchive.file_sorter: Error updating category stats for test.unknown: [Errno 2] No such file or directory: 'test.unknown'
2025-07-31 14:22:10,705 [INFO] spectra_004_db: DB ready at test.db
2025-07-31 14:22:10,721 [INFO] tgarchive.config_models: Configuration saved to <MagicMock spec='Path' id='140009355966512'>
2025-07-31 14:22:10,726 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-07-31 14:22:10,727 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-07-31 14:22:10,728 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-07-31 14:22:10,728 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: filename
2025-07-31 14:22:10,729 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-07-31 14:22:10,730 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-07-31 14:22:10,737 [INFO] tgarchive.config_models: Configuration saved to <MagicMock spec='Path' id='140008716071760'>
2025-07-31 14:22:10,738 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-07-31 14:22:10,738 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-07-31 14:22:10,739 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-07-31 14:22:10,739 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: time
2025-07-31 14:22:10,739 [INFO] tgarchive.forwarding.AttachmentForwarder: Grouping time window: 60 seconds
2025-07-31 14:22:10,739 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-07-31 14:22:10,740 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-07-31 14:22:10,744 [INFO] tgarchive.config_models: Configuration saved to <MagicMock spec='Path' id='140008716398048'>
2025-07-31 14:22:10,745 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-07-31 14:22:10,745 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-07-31 14:22:10,746 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-07-31 14:22:10,749 [INFO] tgarchive.config_models: Loaded config from spectra_config.json
2025-07-31 14:22:10,786 [INFO] spectra_004_db: DB ready at test.db
2025-07-31 14:22:10,787 [INFO] tgarchive.forwarding.SortingForwarder: File grouping strategy: none
2025-07-31 14:22:10,787 [INFO] tgarchive.forwarding.SortingForwarder: Deduplication is ENABLED.
2025-07-31 14:22:10,787 [INFO] tgarchive.forwarding.SortingForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-07-31 14:22:10,790 [ERROR] tgarchive.file_sorter: Error getting MIME type for /tmp/tmpa_470kpb/MagicMock/doc1.pdf.name/140008719364368: [Errno 2] No such file or directory: '/tmp/tmpa_470kpb/MagicMock/doc1.pdf.name/140008719364368'
2025-07-31 14:22:10,791 [ERROR] tgarchive.file_sorter: Error updating category stats for /tmp/tmpa_470kpb/MagicMock/doc1.pdf.name/140008719364368: [Errno 2] No such file or directory: '/tmp/tmpa_470kpb/MagicMock/doc1.pdf.name/140008719364368'
2025-07-31 14:22:10,794 [ERROR] tgarchive.file_sorter: Error getting MIME type for /tmp/tmpa_470kpb/MagicMock/archive1.zip.name/140008896951840: [Errno 2] No such file or directory: '/tmp/tmpa_470kpb/MagicMock/archive1.zip.name/140008896951840'
2025-07-31 14:22:10,794 [ERROR] tgarchive.file_sorter: Error updating category stats for /tmp/tmpa_470kpb/MagicMock/archive1.zip.name/140008896951840: [Errno 2] No such file or directory: '/tmp/tmpa_470kpb/MagicMock/archive1.zip.name/140008896951840'
2025-07-31 14:22:10,797 [ERROR] tgarchive.file_sorter: Error getting MIME type for /tmp/tmpa_470kpb/MagicMock/readme.txt.name/140008897753888: [Errno 2] No such file or directory: '/tmp/tmpa_470kpb/MagicMock/readme.txt.name/140008897753888'
2025-07-31 14:22:10,798 [ERROR] tgarchive.file_sorter: Error updating category stats for /tmp/tmpa_470kpb/MagicMock/readme.txt.name/140008897753888: [Errno 2] No such file or directory: '/tmp/tmpa_470kpb/MagicMock/readme.txt.name/140008897753888'
2025-07-31 14:22:10,802 [INFO] tgarchive.config_models: Loaded config from spectra_config.json
2025-07-31 14:22:10,839 [INFO] spectra_004_db: DB ready at test.db
2025-07-31 14:22:10,840 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-07-31 14:22:10,840 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-07-31 14:22:10,840 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-07-31 14:22:10,844 [INFO] tgarchive.config_models: Loaded config from spectra_config.json
2025-07-31 14:22:10,878 [INFO] spectra_004_db: DB ready at test.db
2025-07-31 14:22:10,879 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-07-31 14:22:10,879 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-07-31 14:22:10,879 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-07-31 14:22:10,881 [INFO] tgarchive.config_models: Loaded config from <MagicMock id='140009273969696'>
2025-07-31 14:22:10,881 [INFO] tgarchive.forwarding.AttachmentForwarder: File grouping strategy: none
2025-07-31 14:22:10,881 [INFO] tgarchive.forwarding.AttachmentForwarder: Deduplication is ENABLED.
2025-07-31 14:22:10,882 [INFO] tgarchive.forwarding.AttachmentForwarder: Loaded 0 existing file content hashes (SHA256) into memory.
2025-07-31 14:22:10,885 [INFO] tgarchive.forwarding.AttachmentForwarder: Recorded forwarded file (Msg ID 1, SHA256: 54eb06f8ca...) to database.
2025-07-31 14:22:10,886 [INFO] tgarchive.forwarding.AttachmentForwarder: Duplicate file found (Msg ID 1, SHA256: 54eb06f8ca...) via in-memory cache.
2025-07-31 14:22:10,887 [INFO] tgarchive.forwarding.AttachmentForwarder: Duplicate file found (Msg ID 1, SHA256: 54eb06f8ca...) via database.
2025-07-31 14:22:10,891 [INFO] tgarchive.forwarding.SortingForwarder: File grouping strategy: none
2025-07-31 14:22:10,891 [INFO] tgarchive.forwarding.SortingForwarder: Deduplication is ENABLED.
2025-07-31 14:22:10,891 [ERROR] tgarchive.forwarding.SortingForwarder: Error loading existing file hashes: 'Mock' object is not iterable
Traceback (most recent call last):
  File "/app/tgarchive/forwarding.py", line 141, in _load_existing_hashes
    for row in cursor:
               ^^^^^^
TypeError: 'Mock' object is not iterable
2025-07-31 14:22:10,894 [INFO] tgarchive.forwarding.SortingForwarder: File grouping strategy: none
2025-07-31 14:22:10,895 [INFO] tgarchive.forwarding.SortingForwarder: Deduplication is ENABLED.
2025-07-31 14:22:10,895 [ERROR] tgarchive.forwarding.SortingForwarder: Error loading existing file hashes: 'Mock' object is not iterable
Traceback (most recent call last):
  File "/app/tgarchive/forwarding.py", line 141, in _load_existing_hashes
    for row in cursor:
               ^^^^^^
TypeError: 'Mock' object is not iterable
2025-07-31 14:22:10,937 [INFO] spectra_004_db: DB ready at test.db
